:root {
  /* Primary Colors - The Fire */
  --campfire-ember: #ff6b35;
  --campfire-flame: #ff8c42;
  --campfire-coal: #2d1b14;

  /* Supporting Colors - The Night Sky */
  --campfire-midnight: #1a1a2e;
  --campfire-twilight: #16213e;
  --campfire-starlight: #f7f9fc;

  /* Neutral Colors - The Forest */
  --campfire-ash: #8b8680;
  --campfire-stone: #5a5a5a;
  --campfire-bark: #3a3a3a;

  --container: 70ch;

  /* Typography variables (defaults to Storyteller: Crimson Pro + Inter) */
  --font-serif: "Crimson Pro", Georgia, "Times New Roman", serif;
  --font-sans: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";

  /* Theme Tokens (Daylight default) */
  --background: var(--campfire-starlight);
  --surface: #ffffff;
  --border: #eeeeee;
  --text: var(--campfire-bark);
  --heading: var(--campfire-coal);

  /* Tag palette */
  --tag-0: #ff6b35; /* ember */
  --tag-1: #2a9d8f; /* teal */
  --tag-2: #3f88c5; /* blue */
  --tag-3: #8a4fff; /* purple */
  --tag-4: #2cb67d; /* green */
  --tag-5: #e53170; /* pink */
}

/* Font pairing presets */
body.campfire.fontpair-storyteller {
  --font-serif: "Crimson Pro", Georgia, "Times New Roman", serif;
  --font-sans: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

body.campfire.fontpair-explorer {
  --font-serif: Lora, Georgia, "Times New Roman", serif;
  --font-sans: "Source Sans Pro", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

body.campfire.fontpair-adventurer {
  --font-serif: "Playfair Display", Georgia, "Times New Roman", serif;
  --font-sans: "Open Sans", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

@media (prefers-color-scheme: dark) {
  :root {
    /* Firelight Mode */
    --background: var(--campfire-midnight);
    --surface: #11162a; /* deep navy surface */
    --border: #222841;
    --text: #e9ecf5; /* starlight text */
    --heading: #f2f5fb;
  }
}

/* Explicit theme overrides via body classes */
body.campfire.theme-daylight {
  --background: var(--campfire-starlight);
  --surface: #ffffff;
  --border: #eeeeee;
  --text: var(--campfire-bark);
  --heading: var(--campfire-coal);
}

body.campfire.theme-firelight {
  --background: var(--campfire-midnight);
  --surface: #11162a;
  --border: #222841;
  --text: #e9ecf5;
  --heading: #f2f5fb;
}

html { box-sizing: border-box; }
*, *::before, *::after { box-sizing: inherit; }

body.campfire {
  margin: 0;
  font-family: var(--font-sans);
  color: var(--text);
  background: var(--background);
  line-height: 1.65;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.site-header, .site-footer {
  padding: 1rem;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
}
.site-footer { border-top: 1px solid var(--border); border-bottom: none; }
.site-title { text-decoration: none; color: var(--heading); font-weight: 700; }

main { max-width: var(--container); margin: 2rem auto; padding: 0 1rem; }

h1, h2, h3, h4 { font-family: var(--font-serif); color: var(--heading); }
.post-title { margin-bottom: 0.25rem; }
.post-date { color: var(--campfire-ash); font-size: 0.9rem; margin-top: 0; }

.post-list { list-style: none; padding: 0; }
.post-item { margin: 1.75rem 0; padding-bottom: 1.25rem; border-bottom: 1px solid var(--border); }
.post-list > .post-item:last-child { border-bottom: none; padding-bottom: 0; }
.post-item a { color: var(--campfire-ember); text-decoration: none; }
.post-item a:hover { color: var(--campfire-flame); text-decoration: underline; }
/* Taxonomy badges */
.badges { display: flex; flex-wrap: wrap; gap: 0.35rem; margin-top: 0.25rem; }
.badge {
  display: inline-block;
  padding: 0.15rem 0.5rem;
  font-size: 0.8rem;
  line-height: 1.2;
  border-radius: 999px;
  background: var(--surface);
  border: 1px solid var(--border);
  color: var(--campfire-ember);
  text-decoration: none;
}
.badge:hover { background: color-mix(in srgb, var(--campfire-ember) 10%, var(--surface)); border-color: var(--campfire-ember); }
.badge-category { color: var(--heading); }

/* Tag color variants */
.badge-tag[class*="tag-color-"] { background: color-mix(in srgb, currentColor 12%, var(--surface)); border-color: currentColor; }
.badge-tag.tag-color-0 { color: var(--tag-0); }
.badge-tag.tag-color-1 { color: var(--tag-1); }
.badge-tag.tag-color-2 { color: var(--tag-2); }
.badge-tag.tag-color-3 { color: var(--tag-3); }
.badge-tag.tag-color-4 { color: var(--tag-4); }
.badge-tag.tag-color-5 { color: var(--tag-5); }

/* Accessibility */
.skip-link { position: absolute; left: -10000px; top: auto; width: 1px; height: 1px; overflow: hidden; }
.skip-link:focus { position: static; width: auto; height: auto; }

/* Focus styles */
:focus-visible {
  outline: 3px solid var(--campfire-ember);
  outline-offset: 2px;
  border-radius: 6px;
}
a { text-underline-offset: 2px; }
a:focus-visible { text-decoration: underline; }

/* Post content sizing and elements */
.post-content { font-size: 1.05rem; }
.post-content img { max-width: 100%; height: auto; border-radius: 8px; }
.post-content pre, .post-content code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
.post-content pre { background: var(--surface); border: 1px solid var(--border); padding: 1rem; border-radius: 8px; overflow: auto; }
.post-content blockquote { margin: 1rem 0; padding: 0.5rem 1rem; border-left: 4px solid var(--campfire-ember); background: rgba(255,107,53,0.06); }

/* Post meta and related */
.post-meta { color: var(--campfire-ash); font-size: 0.95rem; }
.post-footer { margin-top: 2rem; }
.post-taxonomies a { color: var(--campfire-ember); }
.related { margin-top: 2rem; }
.related-title { font-size: 1.2rem; }

/* Pagination */
.pagination { display: flex; gap: 0.5rem; align-items: center; margin-top: 2rem; justify-content: center; }
.pagination a, .pagination span {
  display: inline-block;
  padding: 0.4rem 0.7rem;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  text-decoration: none;
}
.pagination .current { border-color: var(--campfire-ember); color: var(--campfire-ember); font-weight: 600; }

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
}

/* Sidebar Layout */
.layout {
  max-width: min(1280px, 96vw);
  margin: 2rem auto;
  padding: 0 1rem;
}
.layout { flex: 1 0 auto; }
.layout.layout-corner { max-width: min(1000px, 92vw); }
.layout.layout-clearing { max-width: min(1400px, 96vw); }
.layout.has-sidebar {
  display: grid;
  grid-template-columns: 1.3fr 340px;
  gap: 2rem;
}
.layout.layout-corner.has-sidebar { grid-template-columns: 0.8fr 320px; }
.layout.layout-clearing.has-sidebar { grid-template-columns: 1.4fr 360px; }
.content-area { min-width: 0; }

/* Sticky sidebar on desktop */
@media (min-width: 992px) {
  .sidebar { position: sticky; top: 2rem; align-self: start; }
}
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
.sidebar { position: relative; }
.sidebar-inner { position: sticky; top: 1rem; padding-bottom: 2.5rem; }

/* Widgets */
.widget { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 0.875rem; margin-bottom: 0.875rem; box-shadow: 0 4px 12px rgba(0,0,0,0.04); }
.widget-title { font-family: "Crimson Pro", Georgia, "Times New Roman", serif; font-size: 1.1rem; margin: 0 0 0.4rem; color: var(--heading); }
.author-card { display: flex; gap: 0.75rem; align-items: center; }
.menu { list-style: none; padding: 0; margin: 0; }
.menu li { margin: 0.25rem 0; }
.menu a { color: var(--campfire-ember); text-decoration: none; }
.menu a:hover, .menu a:focus { color: var(--campfire-flame); text-decoration: underline; }
.tag-list { display: flex; flex-wrap: wrap; gap: 0.4rem; }
.tag { display: inline-block; padding: 0.25rem 0.5rem; border-radius: 999px; font-size: 0.85rem; text-decoration: none; }
.tag:hover { filter: brightness(1.05); }
/* Sidebar tag color variants */
.tag.tag-color-0 { color: var(--tag-0); background: color-mix(in srgb, var(--tag-0) 12%, var(--surface)); }
.tag.tag-color-1 { color: var(--tag-1); background: color-mix(in srgb, var(--tag-1) 12%, var(--surface)); }
.tag.tag-color-2 { color: var(--tag-2); background: color-mix(in srgb, var(--tag-2) 12%, var(--surface)); }
.tag.tag-color-3 { color: var(--tag-3); background: color-mix(in srgb, var(--tag-3) 12%, var(--surface)); }
.tag.tag-color-4 { color: var(--tag-4); background: color-mix(in srgb, var(--tag-4) 12%, var(--surface)); }
.tag.tag-color-5 { color: var(--tag-5); background: color-mix(in srgb, var(--tag-5) 12%, var(--surface)); }

/* Responsive */
@media (max-width: 900px) {
  .layout.has-sidebar { grid-template-columns: 1fr; }
  .sidebar-inner { position: static; }
}

/* Wider screens: increase sidebar breathing room */
@media (min-width: 1200px) { .sidebar-inner { padding-bottom: 3.5rem; } }
@media (min-width: 1440px) { .sidebar-inner { padding-bottom: 4rem; } }

/* Footer meta */
.footer-inner { display: grid; gap: 0.25rem; justify-items: center; text-align: center; }
.footer-meta { display: flex; gap: 0.75rem; flex-wrap: wrap; justify-content: center; }
.footer-meta a { color: var(--campfire-ember); text-decoration: none; }
.footer-meta a:hover { text-decoration: underline; color: var(--campfire-flame); }
.licenses { color: var(--campfire-ash); margin: 0; }

/* Header & Navigation */
.site-header { position: relative; display: flex; align-items: center; justify-content: space-between; gap: 1rem; padding: 1rem; }
.site-title { font-weight: 700; color: var(--heading); text-decoration: none; }
.header-actions { display: flex; gap: 0.5rem; align-items: center; }
.icon-btn { display: inline-flex; align-items: center; justify-content: center; width: 2.25rem; height: 2.25rem; border-radius: 8px; border: 1px solid var(--border); background: var(--surface); color: var(--heading); cursor: pointer; }
.icon-btn:hover, .icon-btn:focus { outline: none; border-color: var(--campfire-ember); color: var(--campfire-ember); }
.site-nav { position: relative; }
.site-nav .menu { list-style: none; padding: 0; margin: 0; display: flex; gap: 1rem; }
.site-nav .menu a { color: var(--campfire-ember); text-decoration: none; }
.site-nav .menu a:hover, .site-nav .menu a:focus { color: var(--campfire-flame); text-decoration: underline; }
@media (max-width: 900px) {
  .site-nav { display: none; }
  .site-nav.open { display: block; position: absolute; right: 1rem; left: 1rem; top: 100%; z-index: 20; background: var(--surface); border: 1px solid var(--border); border-radius: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.08); padding: 0.5rem 0.75rem; }
  .site-nav.open .menu { flex-direction: column; gap: 0.5rem; }
}
@media (min-width: 901px) {
  .hamburger { display: none; }
  .site-nav { display: block; }
}

/* Dark mode adjustments */
.theme-firelight .icon-btn { color: var(--text); }
.theme-firelight .post-meta { color: color-mix(in srgb, var(--text) 70%, var(--campfire-ash) 30%); }
.theme-firelight .post-date { color: color-mix(in srgb, var(--text) 70%, var(--campfire-ash) 30%); }
/* Dark mode link colors */
.theme-firelight a,
.theme-firelight a:visited { color: var(--campfire-ember); }
.theme-firelight a:hover,
.theme-firelight a:focus { color: var(--campfire-flame); text-decoration: underline; }

/* Home blurb (intro text under homepage title) */
.home-blurb { color: var(--campfire-stone); }
.theme-firelight .home-blurb { color: color-mix(in srgb, var(--text) 70%, var(--campfire-ash) 30%); }
